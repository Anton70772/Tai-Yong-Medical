import*as e from"react";var t=null,n="undefined"==typeof window,r=n?t:window,o=Map,i=Object,c=Array,s=c.isArray,u=setTimeout,a=performance,l=Function.prototype,f=o.prototype,p=f.has,y=f.get,d=f.set,m=i.prototype,g=m.hasOwnProperty,h=m.toString,b="<unknown>",v="_ANYA_",w="Symbol(react.",_=w+"element)",E=w+"forward_ref)",S=w+"lazy)",k=w+"memo)",O=w+"portal)",$="Million(Profiler)",P=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],T=(e,n=1e3)=>{let r;return function(){r!=t&&clearTimeout(r),r=u((()=>{e.apply(null,arguments),r=void 0}),n)}},j=e=>"scheduler"in globalThis?r.scheduler.postTask(e,{priority:"background"}):"requestIdleCallback"in r?requestIdleCallback(e):u(e,0),C=()=>{if(n)return t;const e={id:Math.random().toString(36).substring(2)+Date.now(),url:r.location.toString(),wifi:navigator.connection?.effectiveType||b,cpu:navigator.hardwareConcurrency,mem:navigator.deviceMemory,gpu:b};return j((()=>{e.gpu=(()=>{if(!("chrome"in r))return"";const e=document.createElement("canvas").getContext("webgl",{powerPreference:"high-performance"});if(!e)return"";const t=e.getExtension("WEBGL_debug_renderer_info");return t?e.getParameter(t.UNMASKED_RENDERER_WEBGL):""})()})),e},N="application/json",R="function"==typeof CompressionStream,D=async(e,t)=>{const r={ok:!1};if(n)return r;const o=JSON.stringify(t,((e,t)=>{if(null!=t&&!1!==t&&"_"!==e[0])return"number"==typeof t?~~t:t})),i=o.length>1e3,c=i&&R?await(async e=>{const t=new Blob([e],{type:N}).stream().pipeThrough(new CompressionStream("gzip"));return new Response(t).arrayBuffer()})(o):o;let s;if((s=!0)&&!navigator.onLine)return r;return i&&(e+="?z=1"),fetch(e,{body:c,method:"POST",keepalive:!0,priority:"low",mode:void 0,headers:{"Content-Type":N,"Content-Encoding":i?"gzip":void 0}})};import*as L from"react";function x(){const e=L.useRef();return L.useState((()=>{const n=l.bind;l.bind=function(r,o){return r===t&&"function"==typeof o?.type&&(e.current=o,l.bind=n),n.apply(this,arguments)}})),e.current}var z,A,I=(e,n,r)=>{if(!e)return t;if(!0===r(e))return e;let o=n?e.return:e.child;for(;o;){const e=I(o,n,r);if(e)return e;o=n?null:o.sibling}return t},W=e=>{if(!e?.alternate)return!0;const{alternate:t}=e;return t.memoizedProps!==e.memoizedProps||t.memoizedState!==e.memoizedState||t.ref!==e.ref},B=e=>{const n=e?.actualDuration??0;let r=n,o=e?.child;for(;n>0&&o!=t;)r-=o?.actualDuration||0,o=o.sibling;return{t:n,s:r}},M=t,F=e=>{const n=(e=>{let t=M;return e||(t=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED?.ReactCurrentOwner.current),t&&(M=t),M})(e)?._debugOwner?.type;return n&&"function"==typeof n&&n[v]||t},K=(e,t)=>e.length>t?e.slice(0,t)+"…":e,U=e=>{switch(typeof e){case"function":return K(e.toString(),20);case"string":return K(e,20);case"object":if(e===t)return"null";if(c.isArray(e))return e.length>0?"[…]":"[]";if("symbol"==typeof e.$$typeof&&String(e.$$typeof)===_)return"<"+(e.type.displayName||e.type.name||"")+(i.keys(e.props).length>0?" …":"")+">";if("object"==typeof e&&e!==t&&e.constructor===i){for(const t in e)if(g.call(e,t))return"{…}";return"{}"}const n=h.call(e).slice(8,-1);if("Object"===n){const t=i.getPrototypeOf(e)?.constructor;if("function"==typeof t)return(t.displayName||t.name||"")+"{…}"}return n+"{…}";default:return String(e)}},q=(e,n=!1)=>{if("function"==typeof e)return e;if("object"!=typeof e)return t;const r=n?e.type.target:e.type;if("function"==typeof r)return r;if("object"!=typeof r)return t;if("$$typeof"in r)switch(String(r.$$typeof)){case E:return q(e.type.render,!1);case k:case S:return q(e.type,!1)}return t},G=(e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)},H=(e,t)=>{const n=i.assign({},e);for(const r in e){const o=e[r],c=t[r];r.startsWith("on")?o&&c?n[r]=function(){c.apply(this,arguments),o.apply(this,arguments)}:o&&(n[r]=o):"style"===r?n[r]=i.assign({},c,o):"className"===r&&(n[r]=[o,c].filter(Boolean).join(" "))}return i.assign({},t,n)},V=[w+"strict_mode)",w+"fragment)",w+"profiler)",w+"suspense)",w+"suspense_list)"],Y=Symbol.for("mobx administration"),J=e=>{if(!Y||!e||"object"!=typeof e)return!1;const t=i.getOwnPropertySymbols(e)[0];return"Symbol(mobx administration)"===String(t)},Q=e.version.startsWith("19"),X=new o,Z=new o,ee=[],te=!1,ne=C(),re=t,oe=t,ie=[],ce=t,se=-1,ue=["object","function"],ae=(e,n)=>{if(i.is(e,n))return t;const r=U(e),o=U(n),c=n?typeof n:typeof e;return{u:r===o&&ue.includes(c),t:c,c:1,i:t,n:r===o?r:r+"~"+o,d:t}},le=(e,n,r,o)=>{if("function"!=typeof n||v in n||o)return n;const i=function(){const o=a.now();try{const i=arguments[0];i&&"object"==typeof i&&i.currentTarget&&"object"==typeof i.currentTarget&&(i.currentTarget[v]=e+"."+r);const c=n.apply(this,arguments),s=a.now()-o;return be(e,128,r,null,t,s,s,1,null,null,null,[]),c}catch(n){throw be(e,256,r,null,t,0,0,1,null,null,n.message.trim(),[]),n}};return i[v]=!0,i},fe=e.forwardRef(((n,r)=>{const o=n._l;if(!o)return o;if(e.isValidElement(o)){if("string"==typeof o.type&&P.includes(o.type))return o;const c=Q?o.props.ref:o.ref;let s=c;r&&(s=e=>{G(c,e),G(r,e)});const u=i.assign(H(o.props,n),{ref:s});return u._l=void 0,u._c=void 0,u._p=void 0,e.cloneElement(n._p,t,e.cloneElement(o,u,n._c||n.children||o.props?.children))}return o}));fe.displayName=$;var pe=e.Profiler,ye=(t,n,r)=>{if(t.type.displayName===$)return t;const o=e.createElement(pe,{id:n,onRender:(e,t,n)=>{r.push(n)},suppressHydrationWarning:!0,children:t});return String(t.type?.$$typeof)!==E?o:e.createElement(fe,{_l:t,_c:void 0,_p:o})},de=(n,r,o,i,c,s,u,a)=>{if((e=>"function"==typeof e.type&&e.type.prototype?.isReactComponent||String(e.$$typeof)===O||V.includes(String(e.type))||e.render?.muiName)(r)||u)return r;let l=!1;if("object"==typeof r.type&&r.type?.componentStyle&&(l=!0,"string"==typeof r.type?.target))return r;const f=q(r,l),p=f?.[v],y=F(t);let d=[];const m=r.props;"observerComponent"===f?.name&&be(n,1024,o,i,t,0,0,0,p,y,"mobx observer",d);const g=a?.[c];if(g)for(const e in m){if("children"===e)continue;const t=ae(g[e],m[e]);t&&(t.n=e,d.push(t))}a&&(a[c]=m);const h=[],b=r.props.children,w=r.key||void 0,_=s!=t,E=e.createElement(pe,{id:n,key:w,onRender:(e,r,c)=>{if("nested-update"===r)return;const s=h.shift()||0;be(n,"update"===r?64:32,o,i,t,s<=c?c-s:0,c,1,p,y,t,d),d=[]},suppressHydrationWarning:!0,children:Q||_?r:t});return _||Q?E:e.createElement(fe,{key:w,_l:r,_c:e.isValidElement(b)?ye(b,n,h):b,_p:E})},me=(n,r,o)=>{let i=!1;const s=x(),u=(e=>{const t=L.useRef();return L.useLayoutEffect((()=>{t.current=I(e,!1,(e=>"string"==typeof e.type))?.stateNode}),[e]),t})(s);s?.updateQueue?.memoCache&&(r.$=!0);const a=u?.current;a&&!(v in a)&&(a[v]=n);const{s:l,t:f}=B(s);return e.useEffect((()=>{W(s)&&!i&&be(n,512,o,t,t,l,f,1,t,t,t,[])})),e.useEffect((()=>(i=!1,r.i++,()=>{r.i--})),[]),{n:i,c:e.useState((()=>new c(r.c)))[0]}},ge=(e,r,o,i,c,u,a,l,f)=>{if(n)return o;const p=(e=>y.call(Z,e))(r);if(!p)return o;const d=f?.n||!1,m=f?.c||t;return 512&e?me(r,p,i):2&e?((e,n,r,o,i,c)=>{if("object"!=typeof n)return n;const s=x(),u=F(s);if(i)return n;const a=c?.[o];if(W(s)){const o=[];if(a)for(const e in n){const t=ae(a[e],n[e]);t&&(t.n=e,o.push(t))}a&&!o.length||be(e,2,r,t,t,0,0,1,t,u,t,o)}if(!a)for(const o in n)"children"!==o&&J(n[o])&&be(e,1024,r,t,t,0,0,0,t,u,"mobx store",[]);return c&&(c[o]=n),n})(r,o,i,a,d,m):4&e?((e,n,r,o,i,c)=>{const u=x();if(i)return n;const a=F(u);if(u&&s(n)&&2===n.length&&"function"==typeof n[1]){const i=n[1];return c&&(c[o]||be(e,4,r,t,t,0,0,1,t,a,t,[]),c[o]=n[0]),n[1]=function(o){const c=n[0];i(o);const s=ae(c,o);if(!s||!W(u))return;const{s:l,t:f}=B(u);be(e,4,r,t,t,l,f,1,t,a,t,[s])},n}let l=n;u&&"object"==typeof n&&n?.current&&(l=n.current);const f=c?.[o];if(W(u)){const o=ae(f,l);if(!o)return n;be(e,4,r,t,t,0,0,1,t,a,t,[o])}return c&&(c[o]=l),n})(r,o,i,a,d,m):1&e?((e,n,r,o,i,c,u)=>{if(!s(n))return n;const a=x();if(c)return n;const l=F(a),f=u?.[i],p=[];if(f)for(let e=0,t=n.length;e<t;e++){const t=f[e],r=n[e],o=ae(t,r);o&&(o.n=`${e}`,p.push(o))}return f&&!p.length||be(e,1,r,t,o,0,0,1,t,l,t,p),u&&(u[i]=n),n})(r,o,i,u,a,d,m):16&e?de(r,o,i,c,a,l,d,m):128&e?le(r,o,i,d):o},he=(e,n,r,o,i)=>n&&r!=t&&o!=t&&e!=t&&i!=t?ge("object"==typeof e&&"$$typeof"in e?16:4,n,e,r,t,t,o,t,i||t):e,be=(e,n,r,i,c,s,u,a,l,f,m,g)=>{const h={k:n,l:r,l2:i,ls:c,s:s,t:u,c:a,i:l,o:f,m:m,d:g,x:se},b=((e,t,n,r,o)=>e+"."+t+"."+n+"."+(r||"")+"."+(o||""))(e,n,r,f,m);if(p.call(X,b)){const e=y.call(X,b),n=ee[e].r;return n.c+=a,n.t+=u,n.s+=s,void(n.d=((e,n)=>{if(!e&&!n)return[];if(!e?.length)return n;if(!n?.length)return e;let r=0,i=0,c=e.length-1,s=n.length-1;for(;r<=c&&i<=s;){const t=e[r],o=n[i],u=e[c],a=n[s];if(t.n===o.n)t.c+=o.c,t.u||(t.u=o.u),r++,i++;else{if(u.n!==a.n)break;u.c+=a.c,u.u||(u.u=a.u),c--,s--}}const u=new o;for(;r<=c;r++)d.call(u,e[r].n,r);for(;i<=s;i++){const r=n[i],o=y.call(u,r.n);if(o==t){const t=e.push(r);d.call(u,r.n,t-1);continue}const c=e[o];c.c+=r.c,c.u||(c.u=r.u)}return e})(n.d,g))}d.call(X,b,ee.length);const v={k:e,r:h};ee.length>=1e4?ve():(ee.push(v),oe?.())},ve=()=>{const n=ee.length;if(navigator.onLine&&re&&n&&z){try{const n=i.create(t);Z.forEach(((e,t)=>{n[t]={i:e.i,$:e.$}}));const r=Date.now(),o=new c(ie.length);for(let e=0,n=ie.length;e<n;e++){const n=ie[e];let i=t,c=n.k;if(c){const e=c.split(".");i=e[2]||t,i&&(c=e[0]+"."+e[1])}o[e]={n:n.n,t:n.t,l:Number(i),d:r-n.d,k:n.k}}const s={batch:ee,interactions:o,components:n,session:ne,buildId:A,apiKey:z,version:"1.0.0-rc.12",react:e.version||b,geo:void 0,date:r};ie=[],ce=t,se=-1;D(re,s).then((()=>{0})).catch((()=>{}))}catch(e){}u(we,0)}},we=()=>{ee.length=0,X.clear()},_e=(e,t,r)=>{n||(r&&!(v in r)&&(r[v]=e),p.call(Z,e)||d.call(Z,e,{i:0,c:t,n:!1}))},Ee=e=>{if(n)return;if(r[v]=!0,re=e?.url||re||"https://lint.million.dev/api/v1/ingest",A||=e?.id,z=e?.apiKey,te)return;te=!0,(()=>{if("function"!=typeof PerformanceObserver)return;new PerformanceObserver((e=>{const n=e.getEntries();for(let e=0,r=n.length;e<r;e++){const r=n[e];"first-contentful-paint"===r.name&&ie.push({n:"FCP",t:~~r.startTime,d:Date.now(),k:t})}})).observe({type:"paint",buffered:!0}),new PerformanceObserver((e=>{const n=e.getEntries();let r=0;for(let e=0,t=n.length;e<t;e++){const t=n[e];r<t.startTime&&(r=t.startTime)}ie.push({n:"LCP",t:~~r,d:Date.now(),k:t})})).observe({type:"largest-contentful-paint",buffered:!0}),new PerformanceObserver((e=>{const n=e.getEntries();for(let e=0,r=n.length;e<r;e++){const r=n[e];ie.push({n:"CLS",t:r.value,d:Date.now(),k:t})}})).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver((e=>{const n=e.getEntries();let r=t;for(let e=0,t=n.length;e<t;e++){const t=n[e];(!r||t.duration>=r.duration)&&(r=t)}if(!r)return;const o=r.interactionId;if(ce!==o){let e=t,n=r.target;for(;n;){if(n[v]){e=n[v],r.target[v]||(r.target[v]=e);break}n=n.parentNode}ce=o,se=ie.push({n:r.name,t:r.duration,d:Date.now(),k:e})-1}})).observe({type:"event",buffered:!0})})();const o=()=>j(ve);(e=>{const t=t=>{"pagehide"!==t.type&&"hidden"!==document.visibilityState||e()};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)})(o);const i=T(o,5e3),c=T((()=>{ne=C()}),3e5);oe=()=>{i(),c()}};export{ge as $$,Ee as init,_e as registerMetadata,we as reset,he as useCapture};